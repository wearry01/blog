
<div id="mygallery" >
  <a href="/images/gallery/img_1.jpg">
    <img src="/images/gallery/img_1.jpg"/>
  </a>
  <a href="/images/gallery/img_2.jpg">
    <img src="/images/gallery/img_2.jpg"/>
  </a>
  <a href="/images/gallery/img_3.jpg">
    <img src="/images/gallery/img_3.jpg"/>
  </a>
  <a href="/images/gallery/img_4.jpg">
    <img src="/images/gallery/img_4.jpg"/>
  </a>
  <a href="/images/gallery/img_5.jpg">
    <img src="/images/gallery/img_5.jpg"/>
  </a>
  <!-- other images... -->
</div>

<script>
  var __cur = 6;
  var __tot = 21;

  $("#mygallery").justifiedGallery({
    margin: 3,
    rel : 'gallery1',
    rowHeight: 200,
    captions: false,
    randomize: true
  });

  $(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() == $(document).height()) {
      for (var i = __cur; i < __cur + 5 && i <= __tot; i++) {
        $('#mygallery').append('<a href="/images/gallery/' + i + '.jpg">' +
          '<img src="/images/gallery/img_' + i + '.jpg"/>' + 
          '</a>');
      }
      __cur = __cur + 5;
      $('#mygallery').justifiedGallery('norewind');
    }
  });
</script>
